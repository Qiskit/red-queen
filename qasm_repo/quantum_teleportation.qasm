OPENQASM 2.0;
include "qelib1.inc";
gate r(param0,param1) q0 { u3(pi/2,pi/2,-pi/2) q0; }
qreg q[3];
creg classz[1];
creg classx[1];
creg c0[1];
r(pi/2,pi) q[0];
barrier q[0],q[1],q[2];
h q[1];
cx q[1],q[2];
barrier q[0],q[1],q[2];
cx q[0],q[1];
h q[0];
barrier q[0],q[1],q[2];
measure q[0] -> classz[0];
measure q[1] -> classx[0];
barrier q[0],q[1],q[2];
if(classx==1) x q[2];
if(classz==1) z q[2];
r(pi/2,pi) q[2];
measure q[2] -> c0[0];
